{% extends "froide_food/base.html" %}

{% load static %}
{% load sekizai_tags %}



{% block main %}
<div id="food-map-wrapper">
  <food-map :config="config">
    <div class="text-center">
      <h3>Anwendung wird geladen</h3>
      <p>
        <img src="{% static "img/spinner.gif" %}" alt="wird geladen"/>
      </p>
    </div>
  </food-map>
</div>

{% addtoblock 'css' %}
  <link rel="stylesheet" href="{% static 'food/css/food.css' %}">
{% endaddtoblock %}

{% addtoblock 'js' %}
  <script src="{% static 'food/js/food.js' %}" charset="utf-8"></script>
  <script type="text/javascript">
    window.L.Icon.Default.imagePath = '{% static "food/images/leaflet/marker-icon.png" %}'.split('/').slice(0, -1).join('/') + '/'
    window.Froide.components.food.createFoodMap('#food-map-wrapper', {
      city: {{ city | safe }},
      filters: {{ filters | safe }},
      imagePath: '{% static "food/images/pin0.svg" %}'.split('/').slice(0, -1).join('/') + '/'
    })
  </script>
{% endaddtoblock %}


{% endblock %}
